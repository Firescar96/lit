(function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={exports:{},id:a,loaded:false};e[a].call(r.exports,r,r.exports,n);r.loaded=true;return r.exports}n.m=e;n.c=t;n.p="";return n(0)})([function(e,t,n){"use strict";var a=n(1);var r=l(a);var i=n(18);var o=l(i);var c=n(21);var s=l(c);function l(e){return e&&e.__esModule?e:{default:e}}var u=ReactRouter.Router;var f=ReactRouter.Route;var d=ReactRouter.browserHistory;ReactDOM.render(React.createElement(u,{history:d},React.createElement(f,{path:"/channels",component:o.default}),React.createElement(f,{path:"/legacy",component:s.default}),React.createElement(f,{path:"*",component:r.default})),document.getElementById("root"))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||false;a.configurable=true;if("value"in a)a.writable=true;Object.defineProperty(e,a.key,a)}}return function(t,n,a){if(n)e(t.prototype,n);if(a)e(t,a);return t}}();var r=n(2);var i=n(4);var o=l(i);var c=n(5);var s=l(c);function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function f(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function d(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}n(9);var p=function(e){d(t,e);function t(e){u(this,t);var n=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.state={peers:"",port:null,balances:[]};return n}a(t,[{key:"update",value:function e(){var t=this;s.default.spread([o.default.send("LitRPC.ListConnections"),o.default.send("LitRPC.GetListeningPorts"),o.default.send("LitRPC.Balance")],function(e,n,a){var r=e.Connections!==null?e.Connections.length:0;var i=n.LisIpPorts!==null?"listening on "+n.LisIpPorts[0]:null;a=a.Balances.map(function(e){return{coinType:e.CoinType,legacy:e.TxoTotal,channel:e.ChanTotal,syncHeight:e.SyncHeight}}).filter(function(e){return e.coinType==65537});t.setState({peers:r,port:i,balances:a})}).fail(function(e){console.error(e)})}},{key:"listen",value:function e(){var t=this;o.default.send("LitRPC.Listen").then(function(e){t.update()}).fail(function(e){console.error(e)})}},{key:"render",value:function e(){var t=this.state.balances.map(function(e){return React.createElement("div",{key:e.coinType,className:"stats"},React.createElement("div",null,React.createElement("div",null,"Legacy ",React.createElement("span",null,React.createElement("img",{src:"/images/correct.svg"}))),React.createElement("div",null,React.createElement("span",null,e.legacy))),React.createElement("div",null,React.createElement("div",null,"Channel ",React.createElement("span",null,React.createElement("img",{src:"/images/hourglass.svg"}))),React.createElement("div",null,React.createElement("span",null,e.channel))),React.createElement("div",null,React.createElement("div",null,"Total ",React.createElement("span",null,React.createElement("img",{src:"/images/the-sum-of.svg"}))),React.createElement("div",null,React.createElement("span",null,e.legacy+e.channel))))});var n=this.state.balances.length>0?this.state.balances[0].syncHeight:0;return React.createElement("div",null,React.createElement(r.Navbar,{page:"overview"}),React.createElement("main",null,React.createElement("div",{className:"stats"},React.createElement("div",null,React.createElement("div",null,React.createElement("span",null,"Block Height")," ",React.createElement("span",null,React.createElement("img",{src:"/images/cube.svg"}))),React.createElement("div",null,React.createElement("span",null,n))),React.createElement("div",null,React.createElement("div",null,React.createElement("span",null,"Listening Ports")," ",React.createElement("span",null,React.createElement("img",{src:"/images/cable.svg"}))),React.createElement("div",null,React.createElement("span",null,this.state.port||"off"),React.createElement("div",null,React.createElement("input",{id:"listeningSelector",type:"checkbox",className:"tgl tgl-flat",checked:this.state.port!==null?"checked":"",onChange:this.listen.bind(this)}),React.createElement("label",{htmlFor:"listeningSelector",className:"tgl-btn"})))),React.createElement("div",null,React.createElement("div",null,React.createElement("span",null,"Peers")," ",React.createElement("span",null,React.createElement("img",{src:"/images/users.svg"}))),React.createElement("div",null,React.createElement("span",null,this.state.peers)))),React.createElement("h2",null,"Balances:"),t))}},{key:"componentDidMount",value:function e(){this.update()}}]);return t}(Reflux.Component);t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.Navbar=undefined;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||false;a.configurable=true;if("value"in a)a.writable=true;Object.defineProperty(e,a.key,a)}}return function(t,n,a){if(n)e(t.prototype,n);if(a)e(t,a);return t}}();var r=n(3);var i=o(r);function o(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function s(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function l(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}var u=function(e){l(t,e);function t(e){c(this,t);return s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}a(t,[{key:"render",value:function e(){return React.createElement("nav",null,React.createElement("pre",null,i.default),React.createElement("ul",null,React.createElement("li",{className:this.props.page=="overview"?"checked":""},React.createElement("a",{href:"/overview"},"Overview")),React.createElement("li",{className:this.props.page=="channels"?"checked":""},React.createElement("a",{href:"/channels"},"Channels")),React.createElement("li",{className:this.props.page=="legacy"?"checked":""},React.createElement("a",{href:"/legacy"},"Legacy"))))}}]);return t}(Reflux.Component);t.Navbar=u},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.default="\n██▓     ██▓▄▄▄█████▓    ▄▄▄▄    ▄▄▄       ███▄ ▄███▓ █████▒\n▓██▒    ▓██▒▓  ██▒ ▓▒   ▓█████▄ ▒████▄    ▓██▒▀█▀ ██▒▓██   ▒ \n▒██░    ▒██▒▒ ▓██░ ▒░   ▒██▒ ▄██▒██  ▀█▄  ▓██    ▓██░▒████ ░ \n▒██░    ░██░░ ▓██▓ ░    ▒██░█▀  ░██▄▄▄▄██ ▒██    ▒██ ░▓█▒  ░ \n░██████▒░██░  ▒██▒ ░    ░▓█  ▀█▓ ▓█   ▓██▒▒██▒   ░██▒░▒█░    \n░ ▒░▓  ░░▓    ▒ ░░      ░▒▓███▀▒ ▒▒   ▓▒█░░ ▒░   ░  ░ ▒ ░    \n░ ░ ▒  ░ ▒ ░    ░       ▒░▒   ░   ▒   ▒▒ ░░  ░      ░ ░      \n ░ ░    ▒ ░  ░          ░    ░   ░   ▒   ░      ░    ░ ░    \n   ░  ░ ░               ░            ░  ░       ░           \n                             ░                              \n"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||false;a.configurable=true;if("value"in a)a.writable=true;Object.defineProperty(e,a.key,a)}}return function(t,n,a){if(n)e(t.prototype,n);if(a)e(t,a);return t}}();var r=n(5);var i=o(r);function o(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}var s={};var l=0;var u=function(){function e(){c(this,e);this.host=location.hostname;this.port=location.port;this.rpccon=new WebSocket("ws://"+this.host+":"+this.port+"/ws");var t=i.default.defer();this.waitForConnection=t.promise;this.rpccon.onopen=function(){t.resolve()};this.rpccon.onmessage=function(e){var t=JSON.parse(e.data);if(t.error!==null){s[t.id].reject(t.error);delete s[t.id]}else if(t.id===null){s[t.id](t.result)}else{s[t.id].resolve(t.result);delete s[t.id]}}}a(e,[{key:"send",value:function e(t){var n=this;for(var a=arguments.length,r=Array(a>1?a-1:0),o=1;o<a;o++){r[o-1]=arguments[o]}var c=i.default.defer();var u=l++;this.waitForConnection.then(function(){n.rpccon.send(JSON.stringify({method:t,params:r,id:u}))});s[u]=c;return c.promise}},{key:"register",value:function e(t,n){s[t]=n}}]);return e}();var f=new u;t.default=f},function(e,t,n){(function(t,n){/*!
	 *
	 * Copyright 2009-2017 Kris Kowal under the terms of the MIT
	 * license found at https://github.com/kriskowal/q/blob/v1/LICENSE
	 *
	 * With parts by Tyler Close
	 * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found
	 * at http://www.opensource.org/licenses/mit-license.html
	 * Forked at ref_send.js version: 2009-05-11
	 *
	 * With parts by Mark Miller
	 * Copyright (C) 2011 Google Inc.
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 *
	 */
(function(t){"use strict";if(typeof bootstrap==="function"){bootstrap("promise",t)}else if(true){e.exports=t()}else if(typeof define==="function"&&define.amd){define(t)}else if(typeof ses!=="undefined"){if(!ses.ok()){return}else{ses.makeQ=t}}else if(typeof window!=="undefined"||typeof self!=="undefined"){var n=typeof window!=="undefined"?window:self;var a=n.Q;n.Q=t();n.Q.noConflict=function(){n.Q=a;return this}}else{throw new Error("This environment was not anticipated by Q. Please file a bug.")}})(function(){"use strict";var e=false;try{throw new Error}catch(t){e=!!t.stack}var a=P();var r;var i=function(){};var o=function(){var e={task:void 0,next:null};var a=e;var r=false;var i=void 0;var c=false;var s=[];function l(){var t,n;while(e.next){e=e.next;t=e.task;e.task=void 0;n=e.domain;if(n){e.domain=void 0;n.enter()}u(t,n)}while(s.length){t=s.pop();u(t)}r=false}function u(e,t){try{e()}catch(e){if(c){if(t){t.exit()}setTimeout(l,0);if(t){t.enter()}throw e}else{setTimeout(function(){throw e},0)}}if(t){t.exit()}}o=function(e){a=a.next={task:e,domain:c&&t.domain,next:null};if(!r){r=true;i()}};if(typeof t==="object"&&t.toString()==="[object process]"&&t.nextTick){c=true;i=function(){t.nextTick(l)}}else if(typeof n==="function"){if(typeof window!=="undefined"){i=n.bind(window,l)}else{i=function(){n(l)}}}else if(typeof MessageChannel!=="undefined"){var f=new MessageChannel;f.port1.onmessage=function(){i=d;f.port1.onmessage=l;l()};var d=function(){f.port2.postMessage(0)};i=function(){setTimeout(l,0);d()}}else{i=function(){setTimeout(l,0)}}o.runAfter=function(e){s.push(e);if(!r){r=true;i()}};return o}();var c=Function.call;function s(e){return function(){return c.apply(e,arguments)}}var l=s(Array.prototype.slice);var u=s(Array.prototype.reduce||function(e,t){var n=0,a=this.length;if(arguments.length===1){do{if(n in this){t=this[n++];break}if(++n>=a){throw new TypeError}}while(1)}for(;n<a;n++){if(n in this){t=e(t,this[n],n)}}return t});var f=s(Array.prototype.indexOf||function(e){for(var t=0;t<this.length;t++){if(this[t]===e){return t}}return-1});var d=s(Array.prototype.map||function(e,t){var n=this;var a=[];u(n,function(r,i,o){a.push(e.call(t,i,o,n))},void 0);return a});var p=Object.create||function(e){function t(){}t.prototype=e;return new t};var h=Object.defineProperty||function(e,t,n){e[t]=n.value;return e};var m=s(Object.prototype.hasOwnProperty);var v=Object.keys||function(e){var t=[];for(var n in e){if(m(e,n)){t.push(n)}}return t};var y=s(Object.prototype.toString);function R(e){return e===Object(e)}function g(e){return y(e)==="[object StopIteration]"||e instanceof E}var E;if(typeof ReturnValue!=="undefined"){E=ReturnValue}else{E=function(e){this.value=e}}var b="From previous event:";function k(t,n){if(e&&n.stack&&typeof t==="object"&&t!==null&&t.stack){var a=[];for(var r=n;!!r;r=r.source){if(r.stack&&(!t.__minimumStackCounter__||t.__minimumStackCounter__>r.stackCounter)){h(t,"__minimumStackCounter__",{value:r.stackCounter,configurable:true});a.unshift(r.stack)}}a.unshift(t.stack);var i=a.join("\n"+b+"\n");var o=w(i);h(t,"stack",{value:o,configurable:true})}}function w(e){var t=e.split("\n");var n=[];for(var a=0;a<t.length;++a){var r=t[a];if(!x(r)&&!_(r)&&r){n.push(r)}}return n.join("\n")}function _(e){return e.indexOf("(module.js:")!==-1||e.indexOf("(node.js:")!==-1}function C(e){var t=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(e);if(t){return[t[1],Number(t[2])]}var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(e);if(n){return[n[1],Number(n[2])]}var a=/.*@(.+):(\d+)$/.exec(e);if(a){return[a[1],Number(a[2])]}}function x(e){var t=C(e);if(!t){return false}var n=t[0];var i=t[1];return n===r&&i>=a&&i<=fe}function P(){if(!e){return}try{throw new Error}catch(e){var t=e.stack.split("\n");var n=t[0].indexOf("@")>0?t[1]:t[2];var a=C(n);if(!a){return}r=a[0];return a[1]}}function j(e,t,n){return function(){if(typeof console!=="undefined"&&typeof console.warn==="function"){console.warn(t+" is deprecated, use "+n+" instead.",new Error("").stack)}return e.apply(e,arguments)}}function T(e){if(e instanceof A){return e}if(B(e)){return Z(e)}else{return Y(e)}}T.resolve=T;T.nextTick=o;T.longStackSupport=false;var O=1;if(typeof t==="object"&&t&&t.env&&t.env.Q_DEBUG){T.longStackSupport=true}T.defer=S;function S(){var t=[],n=[],a;var r=p(S.prototype);var i=p(A.prototype);i.promiseDispatch=function(e,r,i){var o=l(arguments);if(t){t.push(o);if(r==="when"&&i[1]){n.push(i[1])}}else{T.nextTick(function(){a.promiseDispatch.apply(a,o)})}};i.valueOf=function(){if(t){return i}var e=M(a);if(D(e)){a=e}return e};i.inspect=function(){if(!a){return{state:"pending"}}return a.inspect()};if(T.longStackSupport&&e){try{throw new Error}catch(e){i.stack=e.stack.substring(e.stack.indexOf("\n")+1);i.stackCounter=O++}}function o(r){a=r;if(T.longStackSupport&&e){i.source=r}u(t,function(e,t){T.nextTick(function(){r.promiseDispatch.apply(r,t)})},void 0);t=void 0;n=void 0}r.promise=i;r.resolve=function(e){if(a){return}o(T(e))};r.fulfill=function(e){if(a){return}o(Y(e))};r.reject=function(e){if(a){return}o(V(e))};r.notify=function(e){if(a){return}u(n,function(t,n){T.nextTick(function(){n(e)})},void 0)};return r}S.prototype.makeNodeResolver=function(){var e=this;return function(t,n){if(t){e.reject(t)}else if(arguments.length>2){e.resolve(l(arguments,1))}else{e.resolve(n)}}};T.Promise=N;T.promise=N;function N(e){if(typeof e!=="function"){throw new TypeError("resolver must be a function.")}var t=S();try{e(t.resolve,t.reject,t.notify)}catch(e){t.reject(e)}return t.promise}N.race=I;N.all=ie;N.reject=V;N.resolve=T;T.passByCopy=function(e){return e};A.prototype.passByCopy=function(){return this};T.join=function(e,t){return T(e).join(t)};A.prototype.join=function(e){return T([this,e]).spread(function(e,t){if(e===t){return e}else{throw new Error("Q can't join: not the same: "+e+" "+t)}})};T.race=I;function I(e){return N(function(t,n){for(var a=0,r=e.length;a<r;a++){T(e[a]).then(t,n)}})}A.prototype.race=function(){return this.then(T.race)};T.makePromise=A;function A(e,t,n){if(t===void 0){t=function(e){return V(new Error("Promise does not support operation: "+e))}}if(n===void 0){n=function(){return{state:"unknown"}}}var a=p(A.prototype);a.promiseDispatch=function(n,r,i){var o;try{if(e[r]){o=e[r].apply(a,i)}else{o=t.call(a,r,i)}}catch(e){o=V(e)}if(n){n(o)}};a.inspect=n;if(n){var r=n();if(r.state==="rejected"){a.exception=r.reason}a.valueOf=function(){var e=n();if(e.state==="pending"||e.state==="rejected"){return a}return e.value}}return a}A.prototype.toString=function(){return"[object Promise]"};A.prototype.then=function(e,t,n){var a=this;var r=S();var i=false;function o(t){try{return typeof e==="function"?e(t):t}catch(e){return V(e)}}function c(e){if(typeof t==="function"){k(e,a);try{return t(e)}catch(e){return V(e)}}return V(e)}function s(e){return typeof n==="function"?n(e):e}T.nextTick(function(){a.promiseDispatch(function(e){if(i){return}i=true;r.resolve(o(e))},"when",[function(e){if(i){return}i=true;r.resolve(c(e))}])});a.promiseDispatch(void 0,"when",[void 0,function(e){var t;var n=false;try{t=s(e)}catch(e){n=true;if(T.onerror){T.onerror(e)}else{throw e}}if(!n){r.notify(t)}}]);return r.promise};T.tap=function(e,t){return T(e).tap(t)};A.prototype.tap=function(e){e=T(e);return this.then(function(t){return e.fcall(t).thenResolve(t)})};T.when=L;function L(e,t,n,a){return T(e).then(t,n,a)}A.prototype.thenResolve=function(e){return this.then(function(){return e})};T.thenResolve=function(e,t){return T(e).thenResolve(t)};A.prototype.thenReject=function(e){return this.then(function(){throw e})};T.thenReject=function(e,t){return T(e).thenReject(t)};T.nearer=M;function M(e){if(D(e)){var t=e.inspect();if(t.state==="fulfilled"){return t.value}}return e}T.isPromise=D;function D(e){return e instanceof A}T.isPromiseAlike=B;function B(e){return R(e)&&typeof e.then==="function"}T.isPending=F;function F(e){return D(e)&&e.inspect().state==="pending"}A.prototype.isPending=function(){return this.inspect().state==="pending"};T.isFulfilled=Q;function Q(e){return!D(e)||e.inspect().state==="fulfilled"}A.prototype.isFulfilled=function(){return this.inspect().state==="fulfilled"};T.isRejected=H;function H(e){return D(e)&&e.inspect().state==="rejected"}A.prototype.isRejected=function(){return this.inspect().state==="rejected"};var G=[];var U=[];var W=[];var $=true;function X(){G.length=0;U.length=0;if(!$){$=true}}function z(e,n){if(!$){return}if(typeof t==="object"&&typeof t.emit==="function"){T.nextTick.runAfter(function(){if(f(U,e)!==-1){t.emit("unhandledRejection",n,e);W.push(e)}})}U.push(e);if(n&&typeof n.stack!=="undefined"){G.push(n.stack)}else{G.push("(no stack) "+n)}}function J(e){if(!$){return}var n=f(U,e);if(n!==-1){if(typeof t==="object"&&typeof t.emit==="function"){T.nextTick.runAfter(function(){var a=f(W,e);if(a!==-1){t.emit("rejectionHandled",G[n],e);W.splice(a,1)}})}U.splice(n,1);G.splice(n,1)}}T.resetUnhandledRejections=X;T.getUnhandledReasons=function(){return G.slice()};T.stopUnhandledRejectionTracking=function(){X();$=false};X();T.reject=V;function V(e){var t=A({when:function(t){if(t){J(this)}return t?t(e):this}},function e(){return this},function t(){return{state:"rejected",reason:e}});z(t,e);return t}T.fulfill=Y;function Y(e){return A({when:function(){return e},get:function(t){return e[t]},set:function(t,n){e[t]=n},delete:function(t){delete e[t]},post:function(t,n){if(t===null||t===void 0){return e.apply(void 0,n)}else{return e[t].apply(e,n)}},apply:function(t,n){return e.apply(t,n)},keys:function(){return v(e)}},void 0,function t(){return{state:"fulfilled",value:e}})}function Z(e){var t=S();T.nextTick(function(){try{e.then(t.resolve,t.reject,t.notify)}catch(e){t.reject(e)}});return t.promise}T.master=q;function q(e){return A({isDef:function(){}},function t(n,a){return re(e,n,a)},function(){return T(e).inspect()})}T.spread=K;function K(e,t,n){return T(e).spread(t,n)}A.prototype.spread=function(e,t){return this.all().then(function(t){return e.apply(void 0,t)},t)};T.async=ee;function ee(e){return function(){function t(e,t){var i;if(typeof StopIteration==="undefined"){try{i=n[e](t)}catch(e){return V(e)}if(i.done){return T(i.value)}else{return L(i.value,a,r)}}else{try{i=n[e](t)}catch(e){if(g(e)){return T(e.value)}else{return V(e)}}return L(i,a,r)}}var n=e.apply(this,arguments);var a=t.bind(t,"next");var r=t.bind(t,"throw");return a()}}T.spawn=te;function te(e){T.done(T.async(e)())}T["return"]=ne;function ne(e){throw new E(e)}T.promised=ae;function ae(e){return function(){return K([this,ie(arguments)],function(t,n){return e.apply(t,n)})}}T.dispatch=re;function re(e,t,n){return T(e).dispatch(t,n)}A.prototype.dispatch=function(e,t){var n=this;var a=S();T.nextTick(function(){n.promiseDispatch(a.resolve,e,t)});return a.promise};T.get=function(e,t){return T(e).dispatch("get",[t])};A.prototype.get=function(e){return this.dispatch("get",[e])};T.set=function(e,t,n){return T(e).dispatch("set",[t,n])};A.prototype.set=function(e,t){return this.dispatch("set",[e,t])};T.del=T["delete"]=function(e,t){return T(e).dispatch("delete",[t])};A.prototype.del=A.prototype["delete"]=function(e){return this.dispatch("delete",[e])};T.mapply=T.post=function(e,t,n){return T(e).dispatch("post",[t,n])};A.prototype.mapply=A.prototype.post=function(e,t){return this.dispatch("post",[e,t])};T.send=T.mcall=T.invoke=function(e,t){return T(e).dispatch("post",[t,l(arguments,2)])};A.prototype.send=A.prototype.mcall=A.prototype.invoke=function(e){return this.dispatch("post",[e,l(arguments,1)])};T.fapply=function(e,t){return T(e).dispatch("apply",[void 0,t])};A.prototype.fapply=function(e){return this.dispatch("apply",[void 0,e])};T["try"]=T.fcall=function(e){return T(e).dispatch("apply",[void 0,l(arguments,1)])};A.prototype.fcall=function(){return this.dispatch("apply",[void 0,l(arguments)])};T.fbind=function(e){var t=T(e);var n=l(arguments,1);return function e(){return t.dispatch("apply",[this,n.concat(l(arguments))])}};A.prototype.fbind=function(){var e=this;var t=l(arguments);return function n(){return e.dispatch("apply",[this,t.concat(l(arguments))])}};T.keys=function(e){return T(e).dispatch("keys",[])};A.prototype.keys=function(){return this.dispatch("keys",[])};T.all=ie;function ie(e){return L(e,function(e){var t=0;var n=S();u(e,function(a,r,i){var o;if(D(r)&&(o=r.inspect()).state==="fulfilled"){e[i]=o.value}else{++t;L(r,function(a){e[i]=a;if(--t===0){n.resolve(e)}},n.reject,function(e){n.notify({index:i,value:e})})}},void 0);if(t===0){n.resolve(e)}return n.promise})}A.prototype.all=function(){return ie(this)};T.any=oe;function oe(e){if(e.length===0){return T.resolve()}var t=T.defer();var n=0;u(e,function(a,r,i){var o=e[i];n++;L(o,c,s,l);function c(e){t.resolve(e)}function s(e){n--;if(n===0){e.message="Q can't get fulfillment value from any promise, all "+"promises were rejected. Last error message: "+e.message;t.reject(e)}}function l(e){t.notify({index:i,value:e})}},undefined);return t.promise}A.prototype.any=function(){return oe(this)};T.allResolved=j(ce,"allResolved","allSettled");function ce(e){return L(e,function(e){e=d(e,T);return L(ie(d(e,function(e){return L(e,i,i)})),function(){return e})})}A.prototype.allResolved=function(){return ce(this)};T.allSettled=se;function se(e){return T(e).allSettled()}A.prototype.allSettled=function(){return this.then(function(e){return ie(d(e,function(e){e=T(e);function t(){return e.inspect()}return e.then(t,t)}))})};T.fail=T["catch"]=function(e,t){return T(e).then(void 0,t)};A.prototype.fail=A.prototype["catch"]=function(e){return this.then(void 0,e)};T.progress=le;function le(e,t){return T(e).then(void 0,void 0,t)}A.prototype.progress=function(e){return this.then(void 0,void 0,e)};T.fin=T["finally"]=function(e,t){return T(e)["finally"](t)};A.prototype.fin=A.prototype["finally"]=function(e){if(!e||typeof e.apply!=="function"){throw new Error("Q can't apply finally callback")}e=T(e);return this.then(function(t){return e.fcall().then(function(){return t})},function(t){return e.fcall().then(function(){throw t})})};T.done=function(e,t,n,a){return T(e).done(t,n,a)};A.prototype.done=function(e,n,a){var r=function(e){T.nextTick(function(){k(e,i);if(T.onerror){T.onerror(e)}else{throw e}})};var i=e||n||a?this.then(e,n,a):this;if(typeof t==="object"&&t&&t.domain){r=t.domain.bind(r)}i.then(void 0,r)};T.timeout=function(e,t,n){return T(e).timeout(t,n)};A.prototype.timeout=function(e,t){var n=S();var a=setTimeout(function(){if(!t||"string"===typeof t){t=new Error(t||"Timed out after "+e+" ms");t.code="ETIMEDOUT"}n.reject(t)},e);this.then(function(e){clearTimeout(a);n.resolve(e)},function(e){clearTimeout(a);n.reject(e)},n.notify);return n.promise};T.delay=function(e,t){if(t===void 0){t=e;e=void 0}return T(e).delay(t)};A.prototype.delay=function(e){return this.then(function(t){var n=S();setTimeout(function(){n.resolve(t)},e);return n.promise})};T.nfapply=function(e,t){return T(e).nfapply(t)};A.prototype.nfapply=function(e){var t=S();var n=l(e);n.push(t.makeNodeResolver());this.fapply(n).fail(t.reject);return t.promise};T.nfcall=function(e){var t=l(arguments,1);return T(e).nfapply(t)};A.prototype.nfcall=function(){var e=l(arguments);var t=S();e.push(t.makeNodeResolver());this.fapply(e).fail(t.reject);return t.promise};T.nfbind=T.denodeify=function(e){if(e===undefined){throw new Error("Q can't wrap an undefined function")}var t=l(arguments,1);return function(){var n=t.concat(l(arguments));var a=S();n.push(a.makeNodeResolver());T(e).fapply(n).fail(a.reject);return a.promise}};A.prototype.nfbind=A.prototype.denodeify=function(){var e=l(arguments);e.unshift(this);return T.denodeify.apply(void 0,e)};T.nbind=function(e,t){var n=l(arguments,2);return function(){var a=n.concat(l(arguments));var r=S();a.push(r.makeNodeResolver());function i(){return e.apply(t,arguments)}T(i).fapply(a).fail(r.reject);return r.promise}};A.prototype.nbind=function(){var e=l(arguments,0);e.unshift(this);return T.nbind.apply(void 0,e)};T.nmapply=T.npost=function(e,t,n){return T(e).npost(t,n)};A.prototype.nmapply=A.prototype.npost=function(e,t){var n=l(t||[]);var a=S();n.push(a.makeNodeResolver());this.dispatch("post",[e,n]).fail(a.reject);return a.promise};T.nsend=T.nmcall=T.ninvoke=function(e,t){var n=l(arguments,2);var a=S();n.push(a.makeNodeResolver());T(e).dispatch("post",[t,n]).fail(a.reject);return a.promise};A.prototype.nsend=A.prototype.nmcall=A.prototype.ninvoke=function(e){var t=l(arguments,1);var n=S();t.push(n.makeNodeResolver());this.dispatch("post",[e,t]).fail(n.reject);return n.promise};T.nodeify=ue;function ue(e,t){return T(e).nodeify(t)}A.prototype.nodeify=function(e){if(e){this.then(function(t){T.nextTick(function(){e(null,t)})},function(t){T.nextTick(function(){e(t)})})}else{return this}};T.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var fe=P();return T})}).call(t,n(6),n(7).setImmediate)},function(e,t){var n=e.exports={};var a;var r;function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){a=setTimeout}else{a=i}}catch(e){a=i}try{if(typeof clearTimeout==="function"){r=clearTimeout}else{r=o}}catch(e){r=o}})();function c(e){if(a===setTimeout){return setTimeout(e,0)}if((a===i||!a)&&setTimeout){a=setTimeout;return setTimeout(e,0)}try{return a(e,0)}catch(t){try{return a.call(null,e,0)}catch(t){return a.call(this,e,0)}}}function s(e){if(r===clearTimeout){return clearTimeout(e)}if((r===o||!r)&&clearTimeout){r=clearTimeout;return clearTimeout(e)}try{return r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}var l=[];var u=false;var f;var d=-1;function p(){if(!u||!f){return}u=false;if(f.length){l=f.concat(l)}else{d=-1}if(l.length){h()}}function h(){if(u){return}var e=c(p);u=true;var t=l.length;while(t){f=l;l=[];while(++d<t){if(f){f[d].run()}}d=-1;t=l.length}f=null;u=false;s(e)}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1){for(var n=1;n<arguments.length;n++){t[n-1]=arguments[n]}}l.push(new m(e,t));if(l.length===1&&!u){c(h)}};function m(e,t){this.fun=e;this.array=t}m.prototype.run=function(){this.fun.apply(null,this.array)};n.title="browser";n.browser=true;n.env={};n.argv=[];n.version="";n.versions={};function v(){}n.on=v;n.addListener=v;n.once=v;n.off=v;n.removeListener=v;n.removeAllListeners=v;n.emit=v;n.prependListener=v;n.prependOnceListener=v;n.listeners=function(e){return[]};n.binding=function(e){throw new Error("process.binding is not supported")};n.cwd=function(){return"/"};n.chdir=function(e){throw new Error("process.chdir is not supported")};n.umask=function(){return 0}},function(e,t,n){var a=Function.prototype.apply;t.setTimeout=function(){return new r(a.call(setTimeout,window,arguments),clearTimeout)};t.setInterval=function(){return new r(a.call(setInterval,window,arguments),clearInterval)};t.clearTimeout=t.clearInterval=function(e){if(e){e.close()}};function r(e,t){this._id=e;this._clearFn=t}r.prototype.unref=r.prototype.ref=function(){};r.prototype.close=function(){this._clearFn.call(window,this._id)};t.enroll=function(e,t){clearTimeout(e._idleTimeoutId);e._idleTimeout=t};t.unenroll=function(e){clearTimeout(e._idleTimeoutId);e._idleTimeout=-1};t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;if(t>=0){e._idleTimeoutId=setTimeout(function t(){if(e._onTimeout)e._onTimeout()},t)}};n(8);t.setImmediate=setImmediate;t.clearImmediate=clearImmediate},function(e,t,n){(function(e,t){(function(e,n){"use strict";if(e.setImmediate){return}var a=1;var r={};var i=false;var o=e.document;var c;function s(e){if(typeof e!=="function"){e=new Function(""+e)}var t=new Array(arguments.length-1);for(var n=0;n<t.length;n++){t[n]=arguments[n+1]}var i={callback:e,args:t};r[a]=i;c(a);return a++}function l(e){delete r[e]}function u(e){var t=e.callback;var a=e.args;switch(a.length){case 0:t();break;case 1:t(a[0]);break;case 2:t(a[0],a[1]);break;case 3:t(a[0],a[1],a[2]);break;default:t.apply(n,a);break}}function f(e){if(i){setTimeout(f,0,e)}else{var t=r[e];if(t){i=true;try{u(t)}finally{l(e);i=false}}}}function d(){c=function(e){t.nextTick(function(){f(e)})}}function p(){if(e.postMessage&&!e.importScripts){var t=true;var n=e.onmessage;e.onmessage=function(){t=false};e.postMessage("","*");e.onmessage=n;return t}}function h(){var t="setImmediate$"+Math.random()+"$";var n=function(n){if(n.source===e&&typeof n.data==="string"&&n.data.indexOf(t)===0){f(+n.data.slice(t.length))}};if(e.addEventListener){e.addEventListener("message",n,false)}else{e.attachEvent("onmessage",n)}c=function(n){e.postMessage(t+n,"*")}}function m(){var e=new MessageChannel;e.port1.onmessage=function(e){var t=e.data;f(t)};c=function(t){e.port2.postMessage(t)}}function v(){var e=o.documentElement;c=function(t){var n=o.createElement("script");n.onreadystatechange=function(){f(t);n.onreadystatechange=null;e.removeChild(n);n=null};e.appendChild(n)}}function y(){c=function(e){setTimeout(f,0,e)}}var R=Object.getPrototypeOf&&Object.getPrototypeOf(e);R=R&&R.setTimeout?R:e;if({}.toString.call(e.process)==="[object process]"){d()}else if(p()){h()}else if(e.MessageChannel){m()}else if(o&&"onreadystatechange"in o.createElement("script")){v()}else{y()}R.setImmediate=s;R.clearImmediate=l})(typeof self==="undefined"?typeof e==="undefined"?this:e:self)}).call(t,function(){return this}(),n(6))},function(e,t){},,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||false;a.configurable=true;if("value"in a)a.writable=true;Object.defineProperty(e,a.key,a)}}return function(t,n,a){if(n)e(t.prototype,n);if(a)e(t,a);return t}}();var r=n(2);var i=n(4);var o=l(i);var c=n(5);var s=l(c);function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function f(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function d(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}n(19);var p=Reflux.createActions(["setPeers","setChannels","setSelectedPeerIdx","setSelectedChannelIdx"]);var h=function(e){d(t,e);function t(){u(this,t);var e=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));var n=window.sessionStorage.selectedPeerIdx||-1;var a=window.sessionStorage.selectedChannelIdx||-1;e.state={peers:{},channels:[],selectedPeerIdx:n,selectedChannelIdx:a};e.listenables=p;return e}a(t,[{key:"onSetPeers",value:function e(t){this.setState({peers:t})}},{key:"onSetChannels",value:function e(t){this.setState({channels:t})}},{key:"onSetSelectedPeerIdx",value:function e(t){this.setState({setSelectedPeerIdx:t})}},{key:"onSetSelectedChannelIdx",value:function e(t){this.setState({setSelectedChannelIdx:t})}}]);return t}(Reflux.Store);var m=function(e){d(t,e);function t(e){u(this,t);var n=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.state={address:""};n.store=h;return n}a(t,[{key:"connect",value:function e(){o.default.send("LitRPC.Connect",{LNAddr:this.state.address,Nickname:this.state.nickname}).then(function(e){window.location=window.location.href.split("#")[0]}).fail(function(e){console.error(e)})}},{key:"handleChange",value:function e(t){var n={};n[t.target.id]=t.target.value;this.setState(n)}},{key:"render",value:function e(){return React.createElement("section",{className:"css-modal css-modal--transition--fade",id:"peer-modal","data-stackable":"false",role:"dialog","aria-labelledby":"label-fade","aria-hidden":"true"},React.createElement("div",{className:"css-modal_inner"},React.createElement("header",{className:"css-modal_header"},React.createElement("h2",{id:"label-fade"},"Add Peer")),React.createElement("form",{action:"javascript:void(0);",className:"css-modal_content"},React.createElement("div",null,React.createElement("input",{id:"address",type:"text",placeholder:"pubkeyhash@hostname:port",value:this.state.address,onChange:this.handleChange.bind(this)})),React.createElement("div",null,React.createElement("button",{type:"submit",onClick:this.connect.bind(this)},"Go"))),React.createElement("div",null,React.createElement("a",{href:"#!",className:"css-modal_close css-modal_close_button",title:"Close this modal"},"×"))),React.createElement("a",{href:"#!",className:"css-modal_close css-modal_close_area",title:"Close this modal"},"×"))}}]);return t}(Reflux.Component);var v=function(e){d(t,e);function t(e){u(this,t);var n=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.state={nickname:""};n.store=h;return n}a(t,[{key:"nickname",value:function e(){o.default.send("LitRPC.AssignNickname",{Peer:parseInt(this.state.selectedPeerIdx),Nickname:this.state.nickname}).then(function(e){window.location=window.location.href.split("#")[0]}).fail(function(e){console.error(e)})}},{key:"handleChange",value:function e(t){var n={};n[t.target.id]=t.target.value;this.setState(n)}},{key:"render",value:function e(){return React.createElement("section",{className:"css-modal css-modal--transition--fade",id:"nickname-modal",role:"dialog","aria-labelledby":"label-fade","aria-hidden":"true"},React.createElement("div",{className:"css-modal_inner"},React.createElement("header",{className:"css-modal_header"},React.createElement("h2",{id:"label-fade"},"Edit Nickname")),React.createElement("form",{action:"javascript:void(0);",className:"css-modal_content"},React.createElement("div",null,React.createElement("input",{id:"nickname",type:"text",placeholder:"nickname",value:this.state.nickname,onChange:this.handleChange.bind(this)})),React.createElement("div",null,React.createElement("button",{type:"submit",onClick:this.nickname.bind(this)},"Save"))),React.createElement("div",null,React.createElement("a",{href:"#!",className:"css-modal_close css-modal_close_button",title:"Close this modal"},"×"))),React.createElement("a",{href:"#!",className:"css-modal_close css-modal_close_area",title:"Close this modal"},"×"))}}]);return t}(Reflux.Component);var y=function(e){d(t,e);function t(e){u(this,t);var n=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.store=h;return n}a(t,[{key:"update",value:function e(){o.default.send("LitRPC.ListConnections").then(function(e){e=e.Connections!==null?e.Connections:[];var t={};e.forEach(function(e){t[e.PeerNumber]=e});p.setPeers(t)}).fail(function(e){console.error(e)})}},{key:"editNickname",value:function e(t){this.setState({selectedPeerIdx:t});window.sessionStorage.selectedPeerIdx=t;window.location="#nickname-modal"}},{key:"changePeer",value:function e(t){p.setSelectedPeerIdx(t.target.value)}},{key:"render",value:function e(){var t=this;var n=Object.keys(this.state.peers).map(function(e){var n=t.state.peers[e];var a=n.PeerNumber;return React.createElement("li",{key:a},React.createElement("label",{className:t.state.selectedPeerIdx==a?"checked":""},React.createElement("span",null,n.Nickname),React.createElement("input",{type:"radio",onChange:t.changePeer.bind(t),name:"peer",value:a})),React.createElement("div",null,React.createElement("button",{onClick:t.editNickname.bind(t,a)},React.createElement("i",{className:"material-icons"},"mode_edit"))))});return React.createElement("div",{id:"peerList"},React.createElement("ul",null,n),React.createElement("div",{id:"peer-add"},React.createElement("a",{href:"#peer-modal"},"+")))}},{key:"componentDidMount",value:function e(){this.update()}}]);return t}(Reflux.Component);var R=function(e){d(t,e);function t(e){u(this,t);var n=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.state={pushAmount:0};return n}a(t,[{key:"push",value:function e(){var t=this;o.default.send("LitRPC.Push",{ChanIdx:parseInt(this.props.idx),Amt:parseInt(this.state.pushAmount)}).then(function(e){t.state.pushAmount=0;t.props.update()}).fail(function(e){console.error(e)})}},{key:"changePushAmount",value:function e(t){this.setState({pushAmount:t.target.value})}},{key:"xtraCommands",value:function e(t){p.setSelectedChannelIdx(this.props.idx);window.sessionStorage.selectedChannelIdx=this.props.idx;window.location="#xtra-modal"}},{key:"render",value:function e(){return React.createElement("tr",null,React.createElement("td",{className:"chan-capacity"},this.props.capacity),React.createElement("td",{className:"chan-balance"},this.props.balance),React.createElement("td",{className:"chan-state"},this.props.state),React.createElement("td",{className:"chan-zap"},React.createElement("form",{action:"javascript:void(0);"},React.createElement("input",{type:"number",placeholder:"amount",onChange:this.changePushAmount.bind(this),value:this.state.pushAmount}),React.createElement("button",{type:"submit",onClick:this.push.bind(this)},"Zap"))),React.createElement("td",{className:"chan-xtra"},React.createElement("button",{onClick:this.xtraCommands.bind(this)},"X")))}}]);return t}(Reflux.Component);var g=function(e){d(t,e);function t(e){u(this,t);var n=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.store=h;return n}a(t,[{key:"update",value:function e(){var t=this;o.default.send("LitRPC.ChannelList").then(function(e){var n=e.Channels!==null?e.Channels:[];n=n.filter(function(e){return e.PeerIdx==t.state.selectedPeerIdx});p.setChannels(n)}).fail(function(e){console.error(e)})}},{key:"render",value:function e(){var t=this;var n=this.state.channels.map(function(e,n){return React.createElement(R,{key:n,idx:e.CIdx,capacity:e.Capacity,balance:e.MyBalance,state:e.StateNum,update:t.update.bind(t)})});return React.createElement("div",{id:"channelList"},React.createElement("table",null,React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",{className:"chan-capacity"},"Capacity"),React.createElement("th",{className:"chan-balance"},"Balance"),React.createElement("th",{className:"chan-state"},"State"),React.createElement("th",{className:"chan-zap"},"Zap Funds to Channel"),React.createElement("th",{className:"chan-xtra"}," X-tra Commands"))),React.createElement("tbody",null,n)),React.createElement("div",{id:"channel-add"},React.createElement("a",{href:"#channel-modal"},"+")))}},{key:"componentDidMount",value:function e(){this.update()}}]);return t}(Reflux.Component);var E=function(e){d(t,e);function t(e){u(this,t);var n=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.state={capacity:"",initial:""};n.store=h;return n}a(t,[{key:"connect",value:function e(){o.default.send("LitRPC.FundChannel",{Peer:parseInt(this.state.selectedPeerIdx),Capacity:parseInt(this.state.capacity),Initial:parseInt(this.state.initial)}).then(function(e){window.location=window.location.href.split("#")[0]}).fail(function(e){console.error(e)})}},{key:"handleChange",value:function e(t){var n={};n[t.target.id]=t.target.value;this.setState(n)}},{key:"render",value:function e(){return React.createElement("section",{className:"css-modal css-modal--transition--fade",id:"channel-modal",role:"dialog","aria-labelledby":"label-fade","aria-hidden":"true"},React.createElement("div",{className:"css-modal_inner"},React.createElement("header",{className:"css-modal_header"},React.createElement("h2",{id:"label-fade"},"Open Channel")),React.createElement("form",{action:"javascript:void(0);",className:"css-modal_content"},React.createElement("div",null,React.createElement("input",{id:"capacity",type:"text",placeholder:"channel capacity",value:this.state.capacity,onChange:this.handleChange.bind(this)}),React.createElement("input",{id:"initial",type:"text",placeholder:"initial transfer",value:this.state.initial,onChange:this.handleChange.bind(this)})),React.createElement("div",null,React.createElement("button",{type:"submit",onClick:this.connect.bind(this)
},"Go"))),React.createElement("div",null,React.createElement("a",{href:"#!",className:"css-modal_close css-modal_close_button",title:"Close this modal"},"×"))),React.createElement("a",{href:"#!",className:"css-modal_close css-modal_close_area",title:"Close this modal"},"×"))}}]);return t}(Reflux.Component);var b=function(e){d(t,e);function t(e){u(this,t);var n=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.store=h;return n}a(t,[{key:"closeChannel",value:function e(){o.default.send("LitRPC.CloseChannel",{ChanIdx:parseInt(this.state.selectedChannelIdx)}).then(function(e){window.location=window.location.href.split("#")[0]}).fail(function(e){console.error(e)})}},{key:"breakChannel",value:function e(){var t=window.confirm("Are you sure you want to break the channel?");if(t){o.default.send("LitRPC.BreakChannel",{ChanIdx:parseInt(this.state.selectedChannelIdx)}).then(function(e){window.location=window.location.href.split("#")[0]}).fail(function(e){console.error(e)})}}},{key:"render",value:function e(){return React.createElement("section",{className:"css-modal css-modal--transition--fade",id:"xtra-modal",role:"dialog","aria-labelledby":"label-fade","aria-hidden":"true"},React.createElement("div",{className:"css-modal_inner"},React.createElement("header",{className:"css-modal_header"},React.createElement("h2",{id:"label-fade"},"Xtra Commands")),React.createElement("div",{className:"css-modal_content"},React.createElement("div",null,React.createElement("p",null,"If the other party is online then you can close the channel and you funds will be available shortly."),React.createElement("div",null,React.createElement("button",{onClick:this.closeChannel.bind(this)},"Close"))),React.createElement("div",null,React.createElement("p",null,"At anytime you can break the channel, but your funds will be locked for a long time."),React.createElement("div",null,React.createElement("button",{onClick:this.breakChannel.bind(this)},"Break")))),React.createElement("div",null,React.createElement("a",{href:"#!",className:"css-modal_close css-modal_close_button",title:"Close this modal"},"×"))),React.createElement("a",{href:"#!",className:"css-modal_close css-modal_close_area",title:"Close this modal"},"×"))}}]);return t}(Reflux.Component);var k=function(e){d(t,e);function t(e){u(this,t);var n=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.state={message:"",conversations:{}};n.store=h;return n}a(t,[{key:"say",value:function e(){var t=this;o.default.send("LitRPC.Say",{Peer:parseInt(this.state.selectedPeerIdx),Message:this.state.message}).then(function(e){var n=new Date;var a=n.getHours()+":"+n.getMinutes();var r=t.state.conversations;var i=r[t.state.selectedPeerIdx]||[];i.push({isMyMessage:true,name:"You",message:t.state.message,time:a});r[t.state.selectedPeerIdx]=i;t.setState({conversations:r});t.state.message=""}).fail(function(e){console.error(e)})}},{key:"chatHandler",value:function e(t){var n=this.state.peers[t.PeerIdx];if(n===undefined){return}var a=new Date;var r=a.getHours()+":"+a.getMinutes();var i=this.state.conversations;var o=i[t.PeerIdx]||[];o.push({isMyMessage:false,name:n.Nickname,message:t.Text,time:r});i[t.PeerIdx]=o;this.setState({conversations:i})}},{key:"changeMessage",value:function e(t){this.setState({message:t.target.value})}},{key:"render",value:function e(){var t="Message ";var n=this.state.peers[this.state.selectedPeerIdx];t+=n===undefined?"":n.Nickname;var a=this.state.conversations[this.state.selectedPeerIdx]||[];var r=a.map(function(e){return React.createElement("div",{className:e.isMyMessage?"myMessage":""},React.createElement("span",{className:"nickname"},"[",e.time,"] ",e.name,":"),React.createElement("span",{className:"message"},e.message))});return React.createElement("div",{id:"chatbox"},React.createElement("div",null,r),React.createElement("form",{action:"javascript:void(0);"},React.createElement("input",{placeholder:t,onChange:this.changeMessage.bind(this),value:this.state.message}),React.createElement("button",{type:"submit",onClick:this.say.bind(this),hidden:true})))}},{key:"componentDidMount",value:function e(){o.default.register(null,this.chatHandler.bind(this))}}]);return t}(Reflux.Component);var w=function(e){d(t,e);function t(e){u(this,t);var n=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.state={address:"",listening:false};return n}a(t,[{key:"getListeningPorts",value:function e(){var t=this;o.default.send("LitRPC.GetListeningPorts").then(function(e){t.setState({listening:e.LisIpPorts!==null,address:e.Adr})})}},{key:"listen",value:function e(){var t=this;if(this.state.listening){return}o.default.send("LitRPC.Listen").then(function(e){t.getListeningPorts()}).fail(function(e){window.alert(e)})}},{key:"render",value:function e(){return React.createElement("div",null,React.createElement(r.Navbar,{page:"channels"}),React.createElement("div",{id:"identity"},React.createElement("h4",null,"Your Channel identity: "),React.createElement("h4",null,this.state.address),React.createElement("div",null,React.createElement("h4",null,"Listening for connections: "),React.createElement("input",{id:"listeningSelector",type:"checkbox",className:"tgl tgl-flat",checked:this.state.listening?"checked":"",onChange:this.listen.bind(this)}),React.createElement("label",{htmlFor:"listeningSelector",className:"tgl-btn"}))),React.createElement("div",null,React.createElement(y,null),React.createElement("div",{id:"boxes"},React.createElement(g,null),React.createElement(k,null))),React.createElement(m,null),React.createElement(v,null),React.createElement(E,null),React.createElement(b,null))}},{key:"componentDidMount",value:function e(){this.getListeningPorts()}}]);return t}(Reflux.Component);t.default=w},function(e,t){},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||false;a.configurable=true;if("value"in a)a.writable=true;Object.defineProperty(e,a.key,a)}}return function(t,n,a){if(n)e(t.prototype,n);if(a)e(t,a);return t}}();var r=n(5);var i=l(r);var o=n(4);var c=l(o);var s=n(2);function l(e){return e&&e.__esModule?e:{default:e}}function u(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++){n[t]=e[t]}return n}else{return Array.from(e)}}function f(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function d(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e}function p(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t}n(22);var h=Reflux.createActions(["setTransactions","setAddresses"]);var m=function(e){p(t,e);function t(){f(this,t);var e=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.state={transactions:[],addresses:{legacy:[],wit:[]}};e.listenables=h;return e}a(t,[{key:"onSetTransactions",value:function e(t){this.setState({transactions:t})}},{key:"onSetAddresses",value:function e(t,n){this.setState({addresses:{legacy:t,wit:n}})}}]);return t}(Reflux.Store);var v=function(e){p(t,e);function t(e){f(this,t);var n=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.store=m;return n}a(t,[{key:"update",value:function e(){i.default.spread([c.default.send("LitRPC.TxoList"),c.default.send("LitRPC.Address",{NumToMake:0})],function(e,t){e=e.Txos||[];t=t||[];var n=e.map(function(e){return e.OutPoint.split(";")[0]});h.setTransactions(n.reverse());h.setAddresses(t.LegacyAddresses.reverse(),t.WitAddresses.reverse())}).fail(function(e){console.error(e)})}},{key:"render",value:function e(){var t=this.state.transactions.map(function(e){return React.createElement("p",{key:e},e)});var n=this.state.addresses.legacy.map(function(e){return React.createElement("p",{key:e},e)});var a=this.state.addresses.wit.map(function(e){return React.createElement("p",{key:e},e)});return React.createElement("div",{id:"listsbox"},React.createElement("div",{id:"transactionbox"},React.createElement("h3",null,"Transactions"),React.createElement("div",null,t)),React.createElement("div",{id:"addressbox"},React.createElement("div",null,React.createElement("h3",null,"Legacy Addresses"),React.createElement("div",null,n)),React.createElement("div",null,React.createElement("h3",null,"Witness Addresses"),React.createElement("div",null,a))))}},{key:"componentDidMount",value:function e(){this.update()}}]);return t}(Reflux.Component);var y=function(e){p(t,e);function t(e){f(this,t);var n=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.state={sendAddress:"",sendSatoshis:"",balances:[]};n.store=m;return n}a(t,[{key:"update",value:function e(){var t=this;c.default.send("LitRPC.Balance").then(function(e){e=e.Balances.map(function(e){return{coinType:e.CoinType,legacy:e.TxoTotal,channel:e.ChanTotal,syncHeight:e.SyncHeight}}).filter(function(e){return e.coinType==65537});t.setState({balances:e})}).fail(function(e){console.error(e)})}},{key:"address",value:function e(){var t=this;c.default.send("LitRPC.Address",{NumToMake:1}).then(function(e){h.setAddresses([].concat(u(e.LegacyAddresses),u(t.state.addresses.legacy)),[].concat(u(e.WitAddresses),u(t.state.addresses.wit)))}).fail(function(e){console.error(e)})}},{key:"send",value:function e(){var t=this;console.log(this.state);c.default.send("LitRPC.Send",{DestAddrs:[this.state.sendAddress],Amts:[parseInt(this.state.sendSatoshis)]}).then(function(e){h.setTransactions([].concat(u(e.Txids),u(t.state.transactions)));t.setState({sendAddress:"",sendSatoshis:""})}).fail(function(e){console.error(e)})}},{key:"handleChange",value:function e(t){var n={};n[t.target.id]=t.target.value;this.setState(n)}},{key:"render",value:function e(){var t=this.state.balances.map(function(e){return React.createElement("div",{key:e.coinType,id:"balances"},React.createElement("div",null,React.createElement("div",null,"Legacy ",React.createElement("span",null,React.createElement("img",{src:"/images/correct.svg"}))),React.createElement("div",null,React.createElement("span",null,e.legacy))),React.createElement("div",null,React.createElement("div",null,"Channel ",React.createElement("span",null,React.createElement("img",{src:"/images/hourglass.svg"}))),React.createElement("div",null,React.createElement("span",null,e.channel))),React.createElement("div",null,React.createElement("div",null,"Total ",React.createElement("span",null,React.createElement("img",{src:"/images/the-sum-of.svg"}))),React.createElement("div",null,React.createElement("span",null,e.legacy+e.channel))))});return React.createElement("div",null,React.createElement(s.Navbar,{page:"legacy"}),React.createElement("h2",null,"Balances:"),t,React.createElement("h2",null,"Wallet Commands"),React.createElement("div",{id:"walletbox"},React.createElement("div",null,React.createElement("h3",null,"Get a new address"),React.createElement("div",null,React.createElement("button",{onClick:this.address.bind(this)},"+"))),React.createElement("div",null,React.createElement("h3",null,"Send Transaction"),React.createElement("label",null,React.createElement("span",null,"Pay to"),React.createElement("input",{type:"text",id:"sendAddress",value:this.state.sendAddress,placeholder:"address",onChange:this.handleChange.bind(this)})),React.createElement("label",null,React.createElement("span",null,"Amount"),React.createElement("input",{type:"text",id:"sendSatoshis",value:this.state.sendSatoshis,placeholder:"amount",onChange:this.handleChange.bind(this)})),React.createElement("div",null,React.createElement("button",{onClick:this.send.bind(this)},"send")))),React.createElement(v,{key:this.state.actionTrigger}))}},{key:"componentDidMount",value:function e(){this.update()}}]);return t}(Reflux.Component);t.default=y},function(e,t){}]);